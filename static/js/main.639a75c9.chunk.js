(this.webpackJsonpinvestimentos=this.webpackJsonpinvestimentos||[]).push([[0],{39:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/investimento.32f2c201.png"},47:function(e,t,n){},48:function(e,t,n){},73:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),r=n(23),a=n.n(r),i=n(24),o=n(3),l=n(6),u=Object(c.createContext)({}),d=function(){var e=Object(c.useState)({}),t=Object(l.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(!1),a=Object(l.a)(r,2),i=a[0],o=a[1];return Object(c.useEffect)((function(){var e=localStorage.getItem("investimentos@user"),t=e&&JSON.parse(e);s(t),t||function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),c=1;c<t;c++)n[c-1]=arguments[c];return-1!==n.map((function(t){return t===e})).indexOf(!0)}(window.location.pathname,"/investimentos/login","/investimentos/register")||o(!0)}),[window.location.href]),{user:n,redirect:i}},j=(n(47),n(14)),b=(n(48),n(1)),m=function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:e.id,className:"sr-only",children:e.title}),Object(b.jsx)("input",Object(j.a)(Object(j.a)({},e),{},{className:"btn",placeholder:e.title}))]})},x=function(e){return Object(b.jsx)("div",{className:"text-sm",children:Object(b.jsx)(i.b,{to:e.to,className:"font-medium text-indigo-600 hover:text-indigo-500",children:e.title})})},f=n(18),h=function(){var e=Object(o.f)();return{login:Object(c.useCallback)((function(t){localStorage.setItem("investimentos@user",JSON.stringify(t)),e.replace("/")}),[e]),logout:Object(c.useCallback)((function(){localStorage.removeItem("investimentos@user"),e.replace("/login")}),[e])}},O=n(42),p={baseUrl:"https://meusinvestimentosapi.herokuapp.com"},g=n.n(O).a.create({baseURL:p.baseUrl}),v=function(){var e=function(){var e=h().login,t=Object(c.useState)({login:"",senha:""}),n=Object(l.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)({hasError:!1,message:""}),i=Object(l.a)(a,2),o=i[0],u=i[1];return{updateForm:Object(c.useCallback)((function(e){var t=e.target,n=Object(j.a)(Object(j.a)({},s),{},Object(f.a)({},t.name,t.value));r(n)}),[s]),submitLoginForm:Object(c.useCallback)((function(){g.post("/api/usuarios/auth",s).then((function(t){var n=t.data;e(n)})).catch((function(e){var t,n=(null===(t=e.response.data)||void 0===t?void 0:t.errors)||["500"];u({hasError:!0,message:n.join("\n")})}))}),[s]),error:o,formData:s}}(),t=e.updateForm,s=e.submitLoginForm,r=e.formData,a=e.error;return Object(b.jsx)("div",{className:"min-h-full flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:Object(b.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("img",{className:"mx-auto h-12 w-auto",src:n(39).default,alt:"Workflow"}),Object(b.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"})]}),Object(b.jsxs)("div",{className:"mt-8 space-y-6",children:[Object(b.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[Object(b.jsx)(m,{id:"login",name:"login",type:"username",required:!0,title:"Login",onChange:t,value:r.login}),Object(b.jsx)(m,{id:"senha",name:"senha",type:"password",required:!0,title:"Password",onChange:t,value:r.senha})]}),Object(b.jsx)("div",{hidden:!a.hasError,children:Object(b.jsx)("p",{className:"text-red-600",children:a.message})}),Object(b.jsx)("div",{children:Object(b.jsxs)("button",{type:"submit",onClick:s,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[Object(b.jsx)("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:Object(b.jsx)("i",{className:"h-5 w-5 text-indigo-500 group-hover:text-indigo-400","aria-hidden":"true"})}),"Sign in"]})}),Object(b.jsx)("div",{className:"flex items-center justify-center",children:Object(b.jsx)(x,{title:"Don't have an account?",to:"/register"})})]}),Object(b.jsxs)("div",{children:["\xcdcones feitos por ",Object(b.jsx)("a",{href:"https://www.flaticon.com/br/autores/iconpro86",title:"Iconpro86",children:"Iconpro86"})," from ",Object(b.jsx)("a",{href:"https://www.flaticon.com/br/",title:"Flaticon",children:"www.flaticon.com"})]})]})})},w=Object(o.g)((function(){var e=function(){var e=h().login,t=Object(c.useState)({email:"",login:"",nome:"",senha:"",senhaConfirmacao:""}),n=Object(l.a)(t,2),s=n[0],r=n[1],a=Object(c.useCallback)((function(e){var t=e.target,n=Object(j.a)(Object(j.a)({},s),{},Object(f.a)({},t.name,t.value));r(n)}),[s]),i=Object(c.useCallback)((function(){g.post("/api/usuarios",s).then((function(t){var n=t.data;e(n)})).catch(console.log)}),[s]);return{formData:s,updateForm:a,submitRegisterForm:i}}(),t=e.formData,s=e.submitRegisterForm,r=e.updateForm;return Object(b.jsx)("div",{className:"min-h-full flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:Object(b.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("img",{className:"mx-auto h-12 w-auto",src:n(39).default,alt:"Workflow"}),Object(b.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"})]}),Object(b.jsxs)("div",{className:"mt-8 space-y-6",children:[Object(b.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[Object(b.jsx)(m,{id:"email",name:"email",type:"email",required:!0,title:"Email address",onChange:r,value:t.email}),Object(b.jsx)(m,{id:"login",name:"login",type:"username",required:!0,title:"Login name",onChange:r,value:t.login}),Object(b.jsx)(m,{id:"nome",name:"nome",required:!0,title:"Full Name",onChange:r,value:t.nome}),Object(b.jsx)(m,{id:"senha",name:"senha",type:"password",required:!0,title:"Password",onChange:r,value:t.senha}),Object(b.jsx)(m,{id:"senhaConfirmacao",name:"senhaConfirmacao",type:"password",required:!0,title:"Password confirm",onChange:r,value:t.senhaConfirmacao})]}),Object(b.jsx)("div",{children:Object(b.jsxs)("button",{type:"submit",onClick:s,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[Object(b.jsx)("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:Object(b.jsx)("i",{className:"h-5 w-5 text-indigo-500 group-hover:text-indigo-400","aria-hidden":"true"})}),"Sign up"]})}),Object(b.jsx)("div",{className:"flex items-center justify-center",children:Object(b.jsx)(x,{title:"Already have an account?",to:"/login"})})]})]})})})),y=(n(73),function(e){var t=h().logout,n=Object(c.useContext)(u).user;return Object(b.jsxs)("div",{className:"min-h-screen",children:[Object(b.jsx)("header",{className:"bg-white shadow",children:Object(b.jsxs)("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 flex justify-between",children:[Object(b.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:["Bem vindo(a),",Object(b.jsx)("wbr",{})," ",(null===n||void 0===n?void 0:n.nome)||"Usu\xe1rio","!"]}),Object(b.jsx)("button",{className:"logout",onClick:t,children:"Logout"})]})}),Object(b.jsx)("main",{children:Object(b.jsx)("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:e.children})})]})}),N=n(20),C=n.n(N),k=n(29),S=function(e){return{searchPortfolio:function(){var e=Object(k.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.get("/api/carteira");case 3:return t=e.sent,n=t.data,e.abrupt("return",n.content);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),createPortifolio:e&&function(){var t=Object(k.a)(C.a.mark((function t(n){var c,s,r;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={descricao:n,idUsuario:null===e||void 0===e?void 0:e.id},t.next=3,g.post("/api/carteira",c);case 3:s=t.sent,r=s.data,console.log(r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),sumTransactions:function(e){return e.map((function(e){return e.total})).reduce((function(e,t){return e+t}),0)}}},F=function(e){return e.toLocaleString("pt-br",{currency:"BRL",style:"currency"})},P=(n(75),function(e){var t=e.portfolio,n=e.icon,c=e.title,s=e.transactions,r=e.onClick,a=S().sumTransactions(s);return Object(b.jsxs)("button",{onClick:function(){return r(t)},className:"bg-gray-50 py-5 pr-5 rounded-md flex hover:bg-gray-300 cursor-pointer",children:[Object(b.jsx)("div",{className:"left-bar"}),Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"flex space-x-5",children:[Object(b.jsx)("img",{height:32,width:32,src:n,alt:"Renda fixa icone"}),Object(b.jsx)("h3",{className:"text-xl font-bold",children:c})]}),Object(b.jsx)("div",{children:Object(b.jsx)("p",{title:"Total investido nesta carteira",className:"text-lg font-medium",children:F(a)})})]})]})}),I=n.p+"static/media/interest-rate.78adf9ed.png",L=Object(c.createContext)({portfolio:null}),R=n.p+"static/media/plus.27062e32.svg",q=function(e){var t=e.onClick;return Object(b.jsxs)("button",{onClick:t,className:"bg-gray-50 py-5 pr-5 rounded-md flex hover:bg-gray-300 cursor-pointer",children:[Object(b.jsx)("div",{className:"left-bar"}),Object(b.jsxs)("div",{className:"flex space-x-5 items-center justify-center h-full",children:[Object(b.jsx)("img",{height:32,width:32,src:R,alt:"Renda fixa icone"}),Object(b.jsx)("h3",{className:"text-xl font-bold",children:"Adicionar"})]})]})};q.defaultProps={onClick:function(){}};var E=n(80),T=n(79),D=function(e){var t=e.formName,n=e.children,s=e.onClose,r=e.open;return Object(b.jsx)(E.a,{appear:!0,as:c.Fragment,show:r,children:Object(b.jsx)(T.a,{as:"div",className:"fixed inset-0 z-10 overflow-y-auto",onClose:s,open:r,children:Object(b.jsxs)("div",{className:"min-h-screen px-4 text-center",children:[Object(b.jsx)(T.a.Overlay,{className:"fixed inset-0"}),Object(b.jsx)(T.a.Title,{children:t}),Object(b.jsx)("div",{children:n})]})})})},A=(n(76),function(e){var t=e.hidden,n=Object(c.useState)(!1),s=Object(l.a)(n,2),r=s[0],a=s[1],i=Object(c.useState)(!1),o=Object(l.a)(i,2),u=(o[0],o[1]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(D,{open:r,onClose:function(){return a(!1)},formName:"Renda Vari\xe1vel",children:Object(b.jsx)("h3",{children:"Teste"})}),Object(b.jsxs)("div",{className:t?"invisible":"fab-context",hidden:t,children:[Object(b.jsx)("button",{onClick:function(){return a(!0)},className:"fab-context-button",children:"Renda Vari\xe1vel"}),Object(b.jsx)("button",{onClick:function(){return u(!0)},className:"fab-context-button",children:"Renda fixa"})]})]})}),U=function(){var e=Object(c.useState)(!0),t=Object(l.a)(e,2),n=t[0],s=t[1];return Object(b.jsxs)("div",{className:"fixed bottom-5 right-5 flex flex-col items-end",children:[Object(b.jsx)(A,{hidden:n}),Object(b.jsx)("button",{title:"Criar um ativo",onClick:function(){return s(!n)},children:Object(b.jsx)("img",{src:R,alt:"Plus icon"})})]})},z=Object(o.g)((function(){var e=function(){var e=Object(c.useContext)(u).user,t=Object(c.useMemo)((function(){return S(e)}),[e]),n=Object(c.useState)(null),s=Object(l.a)(n,2),r=s[0],a=s[1],i=Object(c.useState)([]),o=Object(l.a)(i,2),d=o[0],j=o[1];Object(c.useEffect)((function(){(null===e||void 0===e?void 0:e.id)&&t.searchPortfolio().then(j).catch(console.error)}),[t]);var b=Object(c.useMemo)((function(){return d.map((function(e){return e.transacoes.reduce((function(e,t){return t.total+e}),0)})).reduce((function(e,t){return e+t}),0)}),[d]),m=Object(c.useCallback)((function(e){a(e)}),[r]);return{portfolios:d,consolidatedAssets:b,currentPortfolio:r,selectPortfolio:m}}();return Object(b.jsxs)(y,{children:[Object(b.jsxs)("h2",{className:"text-3xl font-bold",children:[Object(b.jsx)("small",{className:"font-medium",children:"Patrim\xf4nio consolidado"}),Object(b.jsx)("br",{}),F(e.consolidatedAssets)]}),Object(b.jsx)("h3",{className:"text-xl my-5 font-bold",children:"Carteiras"}),Object(b.jsxs)(L.Provider,{value:{portfolio:e.currentPortfolio},children:[Object(b.jsxs)("div",{className:"mt-5 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-5",children:[e.portfolios.map((function(t,n){return Object(b.jsx)(P,{portfolio:t,icon:I,title:t.descricao,transactions:t.transacoes,onClick:e.selectPortfolio},n)})),Object(b.jsx)(q,{})]}),Object(b.jsx)(U,{})]})]})})),B=function(){return Object(b.jsxs)("div",{className:"text-center p-10 bg-gray-200",children:["Icons made by",Object(b.jsx)("a",{href:"https://www.flaticon.com/authors/fzyn",title:"fzyn",children:"fzyn"})," and"," ",Object(b.jsx)("a",{href:"https://www.flaticon.com/br/autores/iconpro86",title:"Iconpro86",children:"Iconpro86"})," from",Object(b.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]})};var J=function(){var e=d(),t=e.redirect,n=e.user;return Object(b.jsxs)(i.a,{basename:"/investimentos",children:[Object(b.jsxs)(u.Provider,{value:{user:n},children:[Object(b.jsx)(o.b,{path:"/",exact:!0,component:z}),Object(b.jsx)(o.b,{path:"/login",component:v}),Object(b.jsx)(o.b,{path:"/register",component:w}),t&&Object(b.jsx)(o.a,{to:"/login"})]}),Object(b.jsx)(B,{})]})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,81)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),r(e),a(e)}))};a.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(J,{})}),document.getElementById("root")),M()}},[[77,1,2]]]);
//# sourceMappingURL=main.639a75c9.chunk.js.map